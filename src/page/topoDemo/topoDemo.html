<!DOCTYPE html>
<html>
    <header></header>
    <script src="../../../media/js/jquery-3.1.1.min.js"></script>
    <script src="../../../media/js/jquery.cookie.js"></script>
    <script src="../../../media/js/d3.min.js"></script>
    <script src="../../../media/js/topo-0.4.8-min.js"></script>

    <style type="text/css">
        
    </style>

    <body>
        <div>
            <canvas id="topo-canvas" width="500" height="500"></canvas>
        </div>

        <script type="text/javascript">
            var canvas = document.getElementById("topo-canvas");

            var stage = new JTopo.Stage(canvas);    // 创建一个舞台对象
            var scene = new JTopo.Scene(stage);     // 创建一个场景对象

            // 生成【攻击、被攻击节点】节点
            function newAttackCircleNode(x, y, radiusValue, type = "attack") {
                var nodeFillColor = type === "attack" ? "250,207,127" : "157,207,255";
                var nodeBorderColor = type === "attack" ? "245,159,0" : "10,136,255";
                var nodeBorderWidth = 1;
                var circleNode = new JTopo.CircleNode('node');     // 攻击 Large 节点

                circleNode.radius = radiusValue;
                circleNode.fillColor = nodeFillColor;
                circleNode.borderWidth = nodeBorderWidth;
                circleNode.borderRadius = radiusValue + 1;
                circleNode.borderColor = nodeBorderColor;

                circleNode.setLocation(x, y);
                scene.add(circleNode);
                return circleNode;
            }

            var attackLargeCircleNode = newAttackCircleNode(400, 200, 10, "attack");     // 攻击 Large 节点
            var attackBigCircleNode = newAttackCircleNode(300, 200, 8, "attack");     // 攻击 Big 节点
            var attackMiddleCircleNode = newAttackCircleNode(200, 200, 5, "attack");     // 攻击 Middle 节点
            var attackSmallCircleNode = newAttackCircleNode(100, 200, 3, "attack");     // 攻击 small 节点
            var victimBigCircleNode = newAttackCircleNode(100, 300, 3, "victim");     // 被攻击者 Big 节点

            scene.add(victimBigCircleNode);

            // 曲线连接
            function newCurveLink (nodeA, nodeB, text = "") {
                var link = new JTopo.CurveLink(nodeA, nodeB, text);
                link.strokeColor = "245,159,0";
                link.lineWidth = 1;
                scene.add(link);
                return link;
            }

            newCurveLink(attackLargeCircleNode, attackBigCircleNode);
        </script>
    </body>
</html>