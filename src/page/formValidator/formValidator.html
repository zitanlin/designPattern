<!DOCTYPE html>
<html>
    <head>
        <script src="../../utils/strategies_pattern.js"></script>
    </head>
    <body>
        <form action="">
            <input type="text" placeholder="请输入用户名称……" />
            <input type="text" placeholder="请输入用户密码……" />
            <input type="phone" placeholder="请输入手机号……">
        </form>
        <button onclick="formSubmit(); return false;">提交</button>

        <script type="text/javascript">
            function validateFunc() {
                var validator = new Validator();
                var registerForm = {
                    userName: 's',
                    password: 'assd',
                    phoneNum: '12'
                }
                
                // utils/strategies_pattern.js 中 Validator 实现一
                // validator.add('isNonEmpty', registerForm.userName, '用户名不能为空');
                // validator.add('minLength', registerForm.password, '密码长度不能少于6位');
                
                // utils/strategies_pattern.js 中 Validator 实现二
                validator.add('isNonEmpty', registerForm.userName, '用户名不能为空');
                validator.add('minLength:6', registerForm.password, '密码长度不能少于6位');

                var errorMsg = validator.start(); // 一个个进行校验，获取校验结果
                return errorMsg;
            }

            function formSubmit() {
                var errorMsg = validateFunc(); // 如果 errorMsg 为字符串，说明校验失败

                if(errorMsg) {
                    alert(errorMsg);
                    return false; 	  // 阻止表单提交
                }
                return false;
            }
        </script>
    </body>
</html>